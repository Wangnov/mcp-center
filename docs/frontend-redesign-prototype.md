# MCP Center 前端重构设计方案

## 📋 目录

1. 设计理念
2. MCP Server 页面
3. Project 页面
4. 整体布局
5. 技术实现

---

## 🎨 设计理念

### 核心原则

- **信息密度**：充分展示后端提供的丰富数据
- **可操作性**：快速访问常用操作（启用/禁用、编辑、查看详情）
- **视觉层次**：使用卡片、表格、抽屉等多层次展示
- **响应式**：适配桌面应用和 Web 端

### 数据展示优先级

1. **核心信息**：始终可见（名称、状态、协议）
2. **次要信息**：可折叠/展开（环境变量、参数）
3. **详细信息**：点击查看（工具列表、日志）

---

## 🖥️ MCP Server 页面

### 布局结构

````text
┌─────────────────────────────────────────────────────────────────────┐
│  📦 MCP Servers                                    🔍 搜索  [+ 添加] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  📊 统计面板（可选）                                                  │
│  ┌──────────┬──────────┬──────────┬──────────┐                      │
│  │ 总服务器  │ 已启用    │ 总工具    │ 活跃项目  │                      │
│  │    12    │    8     │   156    │    5     │                      │
│  └──────────┴──────────┴──────────┴──────────┘                      │
│                                                                       │
│  🏷️ 过滤器： [ 全部 ] [ stdio ] [ sse ] [ http ]                     │
│              [ 已启用 ] [ 已禁用 ]                                    │
│                                                                       │
├─────────────────────────────────────────────────────────────────────┤
│                      服务器列表 (卡片视图 / 表格视图)                 │
└─────────────────────────────────────────────────────────────────────┘
```text

### 方案 A：增强表格视图（推荐用于数据密集）

```text
┌───────────────────────────────────────────────────────────────────────────────┐
│ ☑ │ 名称            │ 协议  │ 状态   │ 工具数 │ 最后使用      │ 操作        │
├───┼─────────────────┼───────┼────────┼────────┼───────────────┼─────────────┤
│ ☑ │ 🟢 Context7     │ stdio │ ●启用  │  12    │ 2分钟前       │ [详情][编辑]│
│   │ @upstash/...    │       │        │        │               │ [禁用][删除]│
│   │ ├─ npx -y ...   │       │        │        │               │             │
│   │ └─ 🔐 API_KEY=*** │     │        │        │               │             │
├───┼─────────────────┼───────┼────────┼────────┼───────────────┼─────────────┤
│ ☑ │ 🔴 DeepWiki     │ sse   │ ○禁用  │   8    │ 1小时前       │ [详情][编辑]│
│   │ deepwiki.com    │       │        │        │               │ [启用][删除]│
│   │ └─ 🌐 https://...│      │        │        │               │             │
├───┼─────────────────┼───────┼────────┼────────┼───────────────┼─────────────┤
│ ☑ │ 🟢 Tavily       │ http  │ ●启用  │  24    │ 刚刚          │ [详情][编辑]│
│   │ tavily-mcp      │       │        │        │               │ [禁用][删除]│
│   │ ├─ node tavily  │       │        │        │               │             │
│   │ └─ 🔐 TOKEN=*** │       │        │        │               │             │
└───┴─────────────────┴───────┴────────┴────────┴───────────────┴─────────────┘

📌 表格功能：
• 可展开行：点击行可展开显示命令、环境变量、headers
• 批量操作：勾选多个服务器进行批量启用/禁用/删除
• 排序：按名称、工具数、最后使用时间排序
• 搜索：实时过滤服务器名称、协议
```text

### 方案 B：卡片视图（推荐用于可视化友好）

```text
┌──────────────────────┐  ┌──────────────────────┐  ┌──────────────────────┐
│ 🟢 Context7          │  │ 🔴 DeepWiki          │  │ 🟢 Tavily            │
│ ────────────────────│  │ ────────────────────│  │ ────────────────────│
│ 📡 stdio              │  │ 📡 sse                │  │ 📡 http               │
│ 🔧 12 tools           │  │ 🔧 8 tools            │  │ 🔧 24 tools           │
│ ⏱️ 2分钟前            │  │ ⏱️ 1小时前            │  │ ⏱️ 刚刚               │
│                       │  │                       │  │                       │
│ 💻 npx -y @upstash... │  │ 🌐 https://mcp.dee... │  │ 💻 node tavily-mcp    │
│ 🔐 1 env vars         │  │ 📝 0 env vars         │  │ 🔐 1 env vars         │
│                       │  │                       │  │                       │
│ [●] 已启用            │  │ [○] 已禁用            │  │ [●] 已启用            │
│ [详情] [编辑] [删除]  │  │ [详情] [编辑] [删除]  │  │ [详情] [编辑] [删除]  │
└──────────────────────┘  └──────────────────────┘  └──────────────────────┘

📌 卡片功能：
• 悬停效果：显示完整命令和环境变量
• 状态指示器：绿色圆点（启用）/ 红色圆点（禁用）
• 快速切换：点击状态开关即可启用/禁用
• 拖拽排序：支持拖拽调整显示顺序
```text

### 详情抽屉（Drawer / Side Panel）

点击"详情"按钮时，从右侧滑出详情面板：

```text
┌────────────────────────────────────────────────────────┐
│  ← 返回                          Context7               │
├────────────────────────────────────────────────────────┤
│  📋 基本信息                                            │
│  ┌──────────────────────────────────────────────────┐ │
│  │ 名称:         Context7                            │ │
│  │ ID:           hololh8r                            │ │
│  │ 协议:         stdio                               │ │
│  │ 状态:         🟢 已启用                           │ │
│  │ 创建时间:     2025-01-15 10:30                    │ │
│  │ 最后使用:     2分钟前                             │ │
│  └──────────────────────────────────────────────────┘ │
│                                                         │
│  ⚙️ 启动配置                                           │
│  ┌──────────────────────────────────────────────────┐ │
│  │ 命令:         npx                                 │ │
│  │ 参数:         -y @upstash/context7-mcp           │ │
│  │                                                   │ │
│  │ 环境变量 (1):                                     │ │
│  │   API_KEY=upxx_************AbCdEf (隐藏)        │ │
│  │   [👁️ 显示] [📋 复制]                           │ │
│  └──────────────────────────────────────────────────┘ │
│                                                         │
│  🔧 工具列表 (12)                        [🔍 搜索工具] │
│  ┌──────────────────────────────────────────────────┐ │
│  │ mcp__context7__resolve-library-id                │ │
│  │ ├─ 描述: Resolves a package name to Context7 ID │ │
│  │ └─ 使用次数: 45次                                │ │
│  │                                                   │ │
│  │ mcp__context7__get-library-docs                  │ │
│  │ ├─ 描述: Fetches library documentation          │ │
│  │ └─ 使用次数: 128次                               │ │
│  │                                                   │ │
│  │ ... (展开查看全部工具)                           │ │
│  └──────────────────────────────────────────────────┘ │
│                                                         │
│  📊 使用统计                                            │
│  ┌──────────────────────────────────────────────────┐ │
│  │ 总调用次数:   1,245                              │ │
│  │ 成功率:       98.5%                               │ │
│  │ 平均延迟:     150ms                               │ │
│  │ 最近错误:     0                                   │ │
│  └──────────────────────────────────────────────────┘ │
│                                                         │
│  📁 使用此服务器的项目 (3)                              │
│  ┌──────────────────────────────────────────────────┐ │
│  │ • ~/code/my-app                                   │ │
│  │ • ~/projects/test-project                         │ │
│  │ • ~/work/client-site                              │ │
│  └──────────────────────────────────────────────────┘ │
│                                                         │
│  📝 日志                                  [📥 下载日志] │
│  ┌──────────────────────────────────────────────────┐ │
│  │ [INFO] Server started successfully                │ │
│  │ [DEBUG] Tool resolve-library-id called           │ │
│  │ [INFO] Request completed in 120ms                │ │
│  │ ... (最近100条)                                   │ │
│  └──────────────────────────────────────────────────┘ │
│                                                         │
│  [编辑配置] [重启服务器] [删除服务器]                   │
└────────────────────────────────────────────────────────┘
```text

### 新增/编辑服务器对话框（增强版）

```text
┌─────────────────────────────────────────────────────────┐
│  添加 MCP 服务器                                    [✕]  │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  基本信息                                                │
│  ┌────────────────────────────────────────────────────┐│
│  │ 服务器名称 *                                        ││
│  │ [My Awesome Server                               ] ││
│  │                                                     ││
│  │ 协议类型 *                                          ││
│  │ ( ) stdio   ( ) sse   ( ) http                    ││
│  └────────────────────────────────────────────────────┘│
│                                                          │
│  [如果选择 stdio]                                       │
│  启动配置                                                │
│  ┌────────────────────────────────────────────────────┐│
│  │ 启动命令 *                                          ││
│  │ [npx                                             ] ││
│  │                                                     ││
│  │ 命令参数                                            ││
│  │ [-y @upstash/context7-mcp                        ] ││
│  │ 💡 提示: 多个参数用空格分隔                         ││
│  │                                                     ││
│  │ 环境变量                            [+ 添加变量]    ││
│  │ ┌─────────────┬───────────────────────────┐        ││
│  │ │ 变量名      │ 变量值                     │ [✕]   ││
│  │ ├─────────────┼───────────────────────────┤        ││
│  │ │ API_KEY     │ [upxx_***********]  [👁️]│ [✕]   ││
│  │ │ TIMEOUT     │ [30000            ]       │ [✕]   ││
│  │ └─────────────┴───────────────────────────┘        ││
│  └────────────────────────────────────────────────────┘│
│                                                          │
│  [如果选择 sse/http]                                    │
│  远程配置                                                │
│  ┌────────────────────────────────────────────────────┐│
│  │ 端点 URL *                                          ││
│  │ [https://mcp.deepwiki.com/sse                    ] ││
│  │                                                     ││
│  │ HTTP Headers                        [+ 添加 Header]││
│  │ ┌─────────────┬───────────────────────────┐        ││
│  │ │ Header 名称 │ Header 值                  │ [✕]   ││
│  │ ├─────────────┼───────────────────────────┤        ││
│  │ │ X-API-Key   │ [sk_***********]    [👁️]│ [✕]   ││
│  │ └─────────────┴───────────────────────────┘        ││
│  └────────────────────────────────────────────────────┘│
│                                                          │
│  高级选项 ▼                                              │
│  ┌────────────────────────────────────────────────────┐│
│  │ [✓] 添加后立即启用                                  ││
│  │ [✓] 自动重启（崩溃时）                              ││
│  │ [ ] 启动时运行健康检查                              ││
│  └────────────────────────────────────────────────────┘│
│                                                          │
│  💾 从模板创建 ▼                                         │
│  ┌────────────────────────────────────────────────────┐│
│  │ [Context7] [DeepWiki] [Tavily] [Brave Search]      ││
│  │ [Filesystem] [Puppeteer] [Fetch] [自定义...]       ││
│  └────────────────────────────────────────────────────┘│
│                                                          │
│  📝 配置预览                                             │
│  ┌────────────────────────────────────────────────────┐│
│  │ [mcp_server]                                        ││
│  │ name = "My Awesome Server"                          ││
│  │ protocol = "stdio"                                  ││
│  │ command = "npx"                                     ││
│  │ args = ["-y", "@upstash/context7-mcp"]             ││
│  │ enabled = true                                      ││
│  │                                                     ││
│  │ [env]                                               ││
│  │ API_KEY = "upxx_***********"                        ││
│  │ TIMEOUT = "30000"                                   ││
│  └────────────────────────────────────────────────────┘│
│                                                          │
│            [取消]  [测试连接]  [保存并启用]              │
└─────────────────────────────────────────────────────────┘
```text

---

## 📁 Project 页面

### 布局结构

```text
┌─────────────────────────────────────────────────────────────────────┐
│  📁 Projects                                      🔍 搜索  [+ 添加]  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  📊 统计面板                                                          │
│  ┌──────────┬──────────┬──────────┬──────────┐                      │
│  │ 总项目    │ 活跃项目  │ 总权限    │ 自定义    │                      │
│  │    12    │    5     │   48     │    12    │                      │
│  └──────────┴──────────┴──────────┴──────────┘                      │
│                                                                       │
│  🏷️ 过滤器： [ 全部 ] [ 最近使用 ] [ 有自定义权限 ]                  │
│                                                                       │
├─────────────────────────────────────────────────────────────────────┤
│                          项目列表 (增强表格视图)                      │
└─────────────────────────────────────────────────────────────────────┘
```text

### 增强表格视图

```text
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 项目路径                │ Agent    │ 允许的 MCP 服务器 ID │ 自定义权限 │ 最后使用    │ 操作    │
├─────────────────────────┼──────────┼───────────────────┼────────────┼─────────────┼─────────┤
│ 📁 ~/code/my-app        │ 🅲 Cursor │ Context7, DeepWi  │ 🔧 3 tools │ 2分钟前     │ [编辑]  │
│    e5583df77c30e3de     │          │ ki, Tavily (3)    │ 📝 2 desc  │             │ [详情]  │
│    ├─ 🟢 3 服务器在线    │          │                   │            │             │ [删除]  │
│    └─ 🔧 48 工具可用     │          │                   │            │             │         │
├─────────────────────────┼──────────┼───────────────────┼────────────┼─────────────┼─────────┤
│ 📁 ~/projects/test      │ 🅦 Winds │ Context7, Brave   │ 🔧 0 tools │ 1小时前     │ [编辑]  │
│    eee730c09c05c1b9     │   urf    │ Search (2)        │ 📝 0 desc  │             │ [详情]  │
│    ├─ 🟢 2 服务器在线    │          │                   │            │             │ [删除]  │
│    └─ 🔧 20 工具可用     │          │                   │            │             │         │
├─────────────────────────┼──────────┼───────────────────┼────────────┼─────────────┼─────────┤
│ 📁 ~/work/client-site   │ 🅲 Claude │ 全部 (8)          │ 🔧 0 tools │ 昨天        │ [编辑]  │
│    a1b2c3d4e5f6g7h8     │   Code   │                   │ 📝 0 desc  │             │ [详情]  │
│    ├─ 🟢 8 服务器在线    │          │                   │            │             │ [删除]  │
│    └─ 🔧 156 工具可用    │          │                   │            │             │         │
└─────────────────────────┴──────────┴───────────────────┴────────────┴─────────────┴─────────┘

📌 表格功能：
• 展开行：显示在线服务器数、可用工具数
• 智能排序：按最后使用时间、项目名称、工具数排序
• 批量操作：批量修改多个项目的权限
• Agent 图标：显示使用的 AI Agent（Cursor、Windsurf、Claude Code）
```text

### 项目详情 / 权限编辑抽屉（重新设计）

```text
┌────────────────────────────────────────────────────────────────────────┐
│  ← 返回                    ~/code/my-app                               │
├────────────────────────────────────────────────────────────────────────┤
│  📋 项目信息                                                            │
│  ┌──────────────────────────────────────────────────────────────────┐ │
│  │ 项目路径:     ~/code/my-app                                       │ │
│  │ 项目 ID:      e5583df77c30e3de                                    │ │
│  │ 显示名称:     [My Awesome App (可编辑)          ]                │ │
│  │ 使用 Agent:   🅲 Cursor                                           │ │
│  │ 创建时间:     2025-01-15 10:30                                    │ │
│  │ 最后使用:     2分钟前                                             │ │
│  └──────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  🔐 服务器级别权限                            [全选] [全不选] [反选]   │
│  ┌──────────────────────────────────────────────────────────────────┐ │
│  │                                                                   │ │
│  │  [✓] Context7             stdio    12 tools   ●在线              │ │
│  │  [✓] DeepWiki             sse       8 tools   ●在线              │ │
│  │  [✓] Tavily               http     24 tools   ●在线              │ │
│  │  [ ] Brave Search         http     18 tools   ○离线              │ │
│  │  [ ] Puppeteer            stdio      6 tools   ●在线              │ │
│  │  [ ] Filesystem           stdio     10 tools   ●在线              │ │
│  │                                                                   │ │
│  │  💡 提示: 勾选的服务器，其所有工具默认可用                        │ │
│  └──────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  🔧 工具级别权限（高级）                             ▼ 展开             │
│  ┌──────────────────────────────────────────────────────────────────┐ │
│  │  Context7 MCP 服务器:                                             │ │
│  │    ● 允许全部 (默认)                                              │ │
│  │    ○ 仅允许指定工具 (白名单)                                      │ │
│  │    ○ 禁止指定工具 (黑名单)                                        │ │
│  │                                                                   │ │
│  │  [如果选择白名单/黑名单]                                          │ │
│  │  指定工具:                                      [🔍 搜索工具]     │ │
│  │  ┌────────────────────────────────────────────────────────────┐ │ │
│  │  │ [✓] mcp__context7__resolve-library-id                      │ │ │
│  │  │ [✓] mcp__context7__get-library-docs                        │ │ │
│  │  │ [ ] mcp__context7__list-libraries                          │ │ │
│  │  │ ... (显示该服务器的所有工具)                                │ │ │
│  │  └────────────────────────────────────────────────────────────┘ │ │
│  │                                                                   │ │
│  │  DeepWiki MCP 服务器:                                             │ │
│  │    ● 允许全部 (默认)                                              │ │
│  │    ...                                                            │ │
│  └──────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  📝 自定义工具描述                                   [+ 添加自定义]     │
│  ┌──────────────────────────────────────────────────────────────────┐ │
│  │  mcp__context7__resolve-library-id                               │ │
│  │  ├─ 原始描述: Resolves a package/product name to Context7 ID    │ │
│  │  └─ 自定义描述: [在这个项目中优先使用 npm 包名搜索              ]│ │
│  │                 [保存] [重置]                                     │ │
│  │                                                                   │ │
│  │  mcp__tavily__search                                             │ │
│  │  ├─ 原始描述: Search the web using Tavily API                   │ │
│  │  └─ 自定义描述: [限制搜索结果为10条，减少Token消耗              ]│ │
│  │                 [保存] [重置]                                     │ │
│  │                                                                   │ │
│  │  [+ 添加更多自定义描述]                                          │ │
│  └──────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  📊 使用统计                                                            │
│  ┌──────────────────────────────────────────────────────────────────┐ │
│  │  总工具调用:    1,245 次                                          │ │
│  │  最常用工具:    mcp__context7__get-library-docs (328次)          │ │
│  │  最后调用:      mcp__tavily__search (2分钟前)                     │ │
│  │                                                                   │ │
│  │  工具调用 Top 5:                                                  │ │
│  │  ┌──────────────────────────────────────────┬──────────────┐    │ │
│  │  │ 1. mcp__context7__get-library-docs       │ ████████ 328 │    │ │
│  │  │ 2. mcp__tavily__search                   │ ██████ 215   │    │ │
│  │  │ 3. mcp__deepwiki__ask_question           │ ████ 156     │    │ │
│  │  │ 4. mcp__filesystem__read_file            │ ███ 98       │    │ │
│  │  │ 5. mcp__context7__resolve-library-id     │ ██ 67        │    │ │
│  │  └──────────────────────────────────────────┴──────────────┘    │ │
│  └──────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  🔔 权限变更历史                                                        │
│  ┌──────────────────────────────────────────────────────────────────┐ │
│  │  2025-01-22 14:30  允许 Tavily MCP 服务器                         │ │
│  │  2025-01-20 09:15  禁止 Brave Search MCP 服务器                   │ │
│  │  2025-01-18 16:45  自定义工具描述: resolve-library-id             │ │
│  │  ... (最近20条)                                                   │ │
│  └──────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  💾 配置预览 (TOML)                                 [📋 复制] [📥 导出] │
│  ┌──────────────────────────────────────────────────────────────────┐ │
│  │  id = "e5583df77c30e3de"                                          │ │
│  │  path = "/Users/user/code/my-app"                                │ │
│  │  display_name = "My Awesome App"                                 │ │
│  │  allowed_server_ids = ["context7", "deepwiki", "tavily"]         │ │
│  │                                                                   │ │
│  │  [allowed_server_tools]                                           │ │
│  │  Context7 = { type = "AllowList", tools = [                      │ │
│  │    "mcp__context7__resolve-library-id",                           │ │
│  │    "mcp__context7__get-library-docs"                              │ │
│  │  ]}                                                                │ │
│  │                                                                   │ │
│  │  [[tool_customizations]]                                          │ │
│  │  tool_name = "mcp__context7__resolve-library-id"                 │ │
│  │  description = "在这个项目中优先使用 npm 包名搜索"                │ │
│  └──────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│            [取消]  [重置所有权限]  [保存更改]                           │
└────────────────────────────────────────────────────────────────────────┘
```text

---

## 🗺️ 整体布局

### 导航栏（左侧）

```text
┌──────┐
│  🏠  │  Dashboard（新增）
│  📦  │  MCP Servers
│  📁  │  Projects
│  📊  │  Statistics（新增）
│  📝  │  Logs（新增）
│  ⚙️  │  Settings
│      │
│  💾  │  Backup & Sync（新增）
│  📖  │  Documentation
│  ❓  │  Help
└──────┘
```text

### Dashboard 页面（新增）

```text
┌─────────────────────────────────────────────────────────────────────┐
│  🏠 Dashboard                                         欢迎回来, User │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  📊 总览                                                              │
│  ┌───────────┬───────────┬───────────┬───────────┐                  │
│  │ MCP 服务器 │  项目数    │  总工具    │ 今日调用  │                  │
│  │    12     │     8     │   156     │  1,245   │                  │
│  │  🟢 8在线  │  🟢 5活跃  │  ↑ 12新增 │  ↑ 15%   │                  │
│  └───────────┴───────────┴───────────┴───────────┘                  │
│                                                                       │
│  🔥 快速操作                                                          │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  [+ 添加 MCP 服务器]  [+ 添加项目]  [📝 查看日志]             │  │
│  │  [⚡ 重启所有服务]    [🔄 刷新配置]  [📊 查看统计]             │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                       │
│  ⚡ 最近活动                                                          │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  🔵 2分钟前  │ Cursor 在 ~/code/my-app 调用 get-library-docs  │  │
│  │  🟢 5分钟前  │ Context7 MCP 服务器启动成功                    │  │
│  │  🔴 1小时前  │ DeepWiki MCP 服务器连接失败                    │  │
│  │  🔵 2小时前  │ Windsurf 在 ~/test 调用 tavily-search         │  │
│  │  ... (最近50条)                                                │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                       │
│  📈 调用趋势 (最近7天)                                                │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  1500│                                              ●         │  │
│  │      │                                         ●              │  │
│  │  1000│                                    ●                   │  │
│  │      │                          ●    ●                        │  │
│  │   500│              ●      ●                                  │  │
│  │      │        ●                                               │  │
│  │      └──────────────────────────────────────────────────────│  │
│  │       周一  周二  周三  周四  周五  周六  周日               │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                       │
│  ⚠️ 系统健康                                                          │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  ✅ 所有服务运行正常                                           │  │
│  │  ⚠️ DeepWiki 服务器响应缓慢 (2.5s)                            │  │
│  │  💡 建议: 考虑清理旧日志文件 (3.2 GB)                         │  │
│  └──────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```text

---

## 💻 技术实现

### 后端 HTTP API 扩展

需要在后端添加以下新接口：

```textrust
// 获取服务器详细信息（包含工具列表、配置、统计）
GET /api/mcp/{server_id}

// 获取服务器工具列表
GET /api/mcp/{server_id}/tools

// 获取服务器日志
GET /api/mcp/{server_id}/logs?limit=100

// 获取服务器统计
GET /api/mcp/{server_id}/stats

// 获取项目详细信息
GET /api/project/{project_id}

// 获取项目使用统计
GET /api/project/{project_id}/stats

// 更新项目工具权限
POST /api/project/{project_id}/tools/permissions
{
  "server": "Context7",
  "permission": {
    "type": "AllowList",
    "tools": ["tool1", "tool2"]
  }
}

// Dashboard 数据
GET /api/dashboard/summary
GET /api/dashboard/recent-activities?limit=50
GET /api/dashboard/call-trends?days=7
GET /api/dashboard/health
```text

### 前端组件结构

```text
src/
├── components/
│   ├── servers/
│   │   ├── ServerTable.tsx         # 表格视图
│   │   ├── ServerCard.tsx          # 卡片视图
│   │   ├── ServerDetailDrawer.tsx  # 详情抽屉
│   │   ├── ServerStats.tsx         # 统计组件
│   │   ├── ServerToolList.tsx      # 工具列表
│   │   └── ServerForm.tsx          # 新增/编辑表单
│   ├── projects/
│   │   ├── ProjectTable.tsx        # 项目表格
│   │   ├── ProjectDetailDrawer.tsx # 项目详情/权限编辑
│   │   ├── PermissionManager.tsx   # 权限管理组件
│   │   ├── ToolPermissionList.tsx  # 工具级权限列表
│   │   └── ToolCustomization.tsx   # 工具自定义描述
│   ├── dashboard/
│   │   ├── QuickStats.tsx          # 快速统计
│   │   ├── RecentActivity.tsx      # 最近活动
│   │   ├── CallTrendChart.tsx      # 调用趋势图表
│   │   └── HealthStatus.tsx        # 健康状态
│   └── ui/
│       ├── DataTable.tsx           # 通用数据表格
│       ├── Drawer.tsx              # 抽屉组件
│       ├── StatsCard.tsx           # 统计卡片
│       └── Badge.tsx               # 徽章组件
├── pages/
│   ├── Dashboard.tsx               # 仪表盘
│   ├── Servers.tsx                 # MCP 服务器页面
│   ├── Projects.tsx                # 项目页面
│   ├── Statistics.tsx              # 统计页面
│   ├── Logs.tsx                    # 日志页面
│   └── Settings.tsx                # 设置页面
└── lib/
    ├── api.ts                      # API 客户端
    └── types.ts                    # TypeScript 类型定义
```text

### 状态管理扩展

```texttypescript
// 扩展 Zustand Store
interface McpStoreState {
  // 现有状态...
  servers: McpServer[]
  projects: Project[]

  // 新增状态
  serverDetails: Map<string, ServerDetail>
  projectDetails: Map<string, ProjectDetail>
  dashboardData: DashboardData | null
  activityLog: Activity[]

  // 统计数据
  stats: {
    totalServers: number
    enabledServers: number
    totalTools: number
    todayCalls: number
    callTrend: TrendData[]
  }
}

// 新增接口
interface ServerDetail extends McpServer {
  tools: ToolInfo[]
  logs: LogEntry[]
  stats: ServerStats
  config: ServerConfig
  usedByProjects: string[]
}

interface ProjectDetail extends Project {
  serverStatuses: Map<string, 'online' | 'offline'>
  availableTools: number
  toolPermissions: Map<string, ToolPermission>
  toolCustomizations: Map<string, string>
  usageStats: ProjectUsageStats
  changeHistory: PermissionChange[]
}

interface DashboardData {
  quickStats: QuickStats
  recentActivities: Activity[]
  callTrends: TrendData[]
  health: HealthStatus
}
```text

### 使用的 UI 库组件

基于现有的 shadcn/ui，需要添加：

- **Drawer** (抽屉): 用于详情面板
- **Badge** (徽章): 状态指示器
- **Progress** (进度条): 统计展示
- **Tabs** (标签页): 详情页面切换
- **Card** (卡片): Dashboard 统计卡片
- **Chart** (图表): 使用 recharts 库
- **Accordion** (手风琴): 折叠面板
- **Separator** (分隔线): 视觉分隔

---

## 📐 视觉设计规范

### 颜色系统

```textcss
/* 状态颜色 */
--status-online: oklch(0.70 0.15 142.5);    /* 绿色 */
--status-offline: oklch(0.55 0.22 25.33);   /* 红色 */
--status-warning: oklch(0.75 0.20 85.87);   /* 黄色 */

/* 协议颜色 */
--protocol-stdio: oklch(0.55 0.22 264.05);  /* 蓝色 */
--protocol-sse: oklch(0.70 0.15 142.5);     /* 绿色 */
--protocol-http: oklch(0.65 0.20 350.33);   /* 紫色 */

/* Agent 颜色 */
--agent-cursor: oklch(0.60 0.20 220.0);     /* Cursor 蓝 */
--agent-windsurf: oklch(0.55 0.20 180.0);   /* Windsurf 青 */
--agent-claude: oklch(0.50 0.20 30.0);      /* Claude 橙 */
```text

### 间距规范

```textcss
/* 组件间距 */
--spacing-section: 2rem;      /* 32px - 大区块间距 */
--spacing-card: 1.5rem;       /* 24px - 卡片间距 */
--spacing-element: 1rem;      /* 16px - 元素间距 */
--spacing-compact: 0.5rem;    /* 8px - 紧凑间距 */

/* 内边距 */
--padding-page: 2rem;         /* 32px - 页面内边距 */
--padding-card: 1.5rem;       /* 24px - 卡片内边距 */
--padding-button: 0.75rem 1.5rem; /* 按钮内边距 */
```text

### 字体规范

```textcss
/* 标题 */
--font-size-h1: 2rem;         /* 32px */
--font-size-h2: 1.5rem;       /* 24px */
--font-size-h3: 1.25rem;      /* 20px */

/* 正文 */
--font-size-body: 0.875rem;   /* 14px */
--font-size-small: 0.75rem;   /* 12px */
--font-size-xs: 0.625rem;     /* 10px */

/* 等宽字体 */
--font-mono: "SF Mono", "Consolas", monospace;
```text

---

## 🚀 实施优先级

### Phase 1: 核心功能增强（1-2周）

- ✅ 增强 MCP Server 表格（展开行、更多列）
- ✅ Server 详情抽屉（基本信息、工具列表）
- ✅ 增强 Project 表格（自定义权限指示）
- ✅ Project 权限编辑抽屉（服务器级 + 工具级）

### Phase 2: 高级功能（2-3周）

- ✅ Dashboard 页面
- ✅ 工具使用统计
- ✅ 自定义工具描述
- ✅ 日志查看器
- ✅ 权限变更历史

### Phase 3: 优化和完善（1-2周）

- ✅ 卡片视图（Server 和 Project）
- ✅ 批量操作
- ✅ 高级搜索和过滤
- ✅ 图表和可视化
- ✅ 导入/导出配置
- ✅ 模板系统（快速添加常用服务器）

---

## 🎯 设计亮点

### 1. 信息架构

- **分层展示**：表格 → 详情抽屉 → 编辑对话框
- **渐进增强**：从基本信息到高级配置
- **上下文相关**：根据协议类型显示不同配置

### 2. 用户体验

- **零学习曲线**：熟悉的 UI 模式（表格、卡片、抽屉）
- **快速操作**：常用功能一键可达
- **视觉反馈**：状态颜色、加载动画、成功/错误提示

### 3. 数据可视化

- **统计面板**：一目了然的关键指标
- **趋势图表**：工具调用趋势、使用热图
- **健康监控**：服务器状态、响应时间

### 4. 高级功能

- **细粒度权限**：服务器级 + 工具级 + 自定义描述
- **审计日志**：权限变更历史追踪
- **配置预览**：实时显示 TOML 配置

---

## 🔮 未来展望

### 可能的增强功能

- **工具调用链路追踪**：可视化工具调用路径
- **性能分析**：工具响应时间热图
- **智能推荐**：根据项目类型推荐 MCP 服务器
- **团队协作**：配置分享和同步
- **插件系统**：自定义 UI 扩展
- **主题定制**：用户自定义颜色方案

---

## 📝 总结

这个重新设计的前端方案充分利用了后端提供的丰富数据，提供了：

1. **完整的信息展示**：工具列表、配置详情、使用统计
2. **强大的权限管理**：服务器级 + 工具级 + 自定义描述
3. **直观的可视化**：Dashboard、图表、状态指示器
4. **高效的操作流程**：快速搜索、批量操作、模板系统
5. **专业的用户体验**：分层信息架构、渐进式交互

这套设计既满足了当前需求，又为未来扩展预留了空间。🚀
````
